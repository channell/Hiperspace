
classDiagram

    class HashSet~Graph.HiperEdge~ {

        # From  : Node
        # To  : Node
        # TypeName  : String

        + Name  : String
        + Edge  : Edge
        + Source  : Graph.HiperEdge
        + Width  = 1
        + Length  = 1

    }






 

    class HashSet~Graph.Rule~ {

        # FromType  : String
        # ToType  : String
        # EdgeType  : String


    }






 

    class Valued {

        # name  : String

        + Deleted  = false
        + Value  : Decimal

    }






 

    class Graph.Route {

        # Name  : String

        + Rules  : HashSet~Graph.Rule~

    }



    Graph.Route *-- Graph.Rule


 

    class Graph.Rule {

        # FromType  : String
        # ToType  : String
        # EdgeType  : String


    }






 

    class Cube.PathMessage {

        # Node  : Node
        # Route  : Graph.Route
        # Length  : Int32
        # Targets  : HashSet~String~

        + Edges  : HashSet~Graph.HiperEdge~

    }


    Cube.PathMessage *-- Graph.Route
    Cube.PathMessage *-- String
    Cube.PathMessage *-- Graph.HiperEdge


 

    class Cube.Edge_ {

        # From  : Node
        # To  : Node
        # TypeName  : String

        + Name  : String

    }






 

    class Cube.Edges {

        # From  : Node
        # To  : Node
        # FromTypeName  : String
        # ToTypeName  : String

        + Name  : String

    }






    Cube.Edges ..|> Cube.Edge_
 

    class Cube.Edges2 {

        # From  : Node
        # To  : Node
        # FromTypeName  : String
        # ToTypeName  : String

        + Name  : String

    }






    Cube.Edges2 ..|> Cube.Edge_

    Cube.Edges2 ..|> Cube.Edges
 

    class Cube.Portfolio {

        # Id  : String

        + Parent  : Cube.Portfolio
        + Tier  : Int32

        + Contract_Cube (CubeSlice = "11", Portfolio = this, ContextLabel = contextlabel(this)) : Cube.Contract_Cube
        + Children (Parent = this) : Cube.Portfolio
    }






    Cube.Portfolio ..|> Cube.Edges
 

    class Cube.Country {

        # ISO  : String


        + Contract_Cube (CubeSlice = "13", Country = this, ContextLabel = contextlabel(this)) : Cube.Contract_Cube
        + Instruments (Country = this) : Cube.Instrument
    }






 

    class Cube.Sector {

        # Id  : Int32

        + Name  : String
        + Parent  : Cube.Sector
        + Tier  : Int32

        + Contract_Cube (CubeSlice = "19", Sector = this, ContextLabel = contextlabel(this)) : Cube.Contract_Cube
        + Children (Parent = this) : Cube.Sector
        + Customers (Sector = this) : Cube.Customer
    }






    Cube.Sector ..|> Cube.Edges
 

    class Cube.Product {

        # Id  : String

        + Parent  : Cube.Product
        + Tier  : Int32

        + Contract_Cube (CubeSlice = "25", Product = this, ContextLabel = contextlabel(this)) : Cube.Contract_Cube
        + Children (Parent = this) : Cube.Product
        + ProductInstruments (Product = this) : Cube.Instrument
    }






    Cube.Product ..|> Cube.Edges
 

    class Cube.Account {

        # Id  : String

        + Customer  : Cube.Customer

        + FirstAccount (Account = this) : First.Acc
    }



    Cube.Account --> Cube.Customer


    Cube.Account ..|> Cube.Edges
 

    class Cube.Customer {

        # Id  : String

        + Sector  : Cube.Sector

        + Accounts (Customer = this) : Cube.Account
        + FirstAccount () : Cube.CustomerFirstAccount
    }



    Cube.Customer --> Cube.Sector
    Cube.Customer o-- Cube.CustomerFirstAccount

    Cube.Customer ..|> Cube.Edges
 

    class Cube.Price {

        # owner  : Cube.Instrument

        + Market  : Decimal

    }






 

    class Cube.Instrument {

        # ISIN  : String

        + Country  : Cube.Country
        + Product  : Cube.Product

        + Price () : Cube.Price
        + Market () = Price?.Market
    }



    Cube.Instrument --> Cube.Country
    Cube.Instrument --> Cube.Product
    Cube.Instrument o-- Cube.Price

    Cube.Instrument ..|> Cube.Edges

    Cube.Instrument ..|> Cube.Edges2
 

    class Cube.Contract {

        # Id  : Int64

        + Deleted  = false
        + Quantity  : Decimal
        + Instrument  : Cube.Instrument
        + Portfolio  : Cube.Portfolio
        + Account  : Cube.Account

        + Market () = Instrument?.Market
        + Value () = (Quantity * Market)
        + StdDev () = Value
        + Sector_Dimension () = Account?.Customer?.Sector
        + Country_Dimension () = Instrument?.Country
        + Product_Dimension () = Instrument?.Product
        + Portfolio_Dimension () = Portfolio
    }



    Cube.Contract --> Cube.Instrument
    Cube.Contract --> Cube.Portfolio
    Cube.Contract --> Cube.Account


    Cube.Contract ..|> Valued
 

    class Cube.CustomerFirstAccount {

        # owner  : Cube.Customer

        + Account  : Cube.Account

    }



    Cube.CustomerFirstAccount --> Cube.Account


    Cube.CustomerFirstAccount ..|> First.Acc
 

    class Cube.Contract_Fact {

        # ContextLabel  : String
        # Sector  : Cube.Sector
        # Country  : Cube.Country
        # Product  : Cube.Product
        # Portfolio  : Cube.Portfolio

        + Value  : Decimal
        + StdDev_Vector  : Vector
        + Deleted  = false
        + Facts  : Int64

        + CubeName () = cubename(Sector,Country,Product,Portfolio)
        + StdDev () = StdDev(StdDev_Vector)
    }


    Cube.Contract_Fact --> Cube.Sector
    Cube.Contract_Fact --> Cube.Country
    Cube.Contract_Fact --> Cube.Product
    Cube.Contract_Fact --> Cube.Portfolio



 

    class First.Acc {

        # owner  : Any

        + Account  : Cube.Account

    }



    First.Acc --> Cube.Account


 

    class Banking.Trade {

        # Id  : String

        + Book  : Banking.Book

    }



    Banking.Trade --> Banking.Book


 

    class Banking.Book {

        # Id  : String


        + Trades (Book = this) : Banking.Trade
    }






 

    class Banking.FI.Trade {

        # Id  : String

        + Book  : Banking.Book

    }



    Banking.FI.Trade --> Banking.Book


    Banking.FI.Trade ..|> Banking.Trade
 

    class Banking.FX.Trade {

        # Id  : String

        + Book  : Banking.Book

    }



    Banking.FX.Trade --> Banking.Book


    Banking.FX.Trade ..|> Banking.Trade
 

    class Banking.EQ.Trade {

        # Id  : String

        + Book  : Banking.Book

    }



    Banking.EQ.Trade --> Banking.Book


    Banking.EQ.Trade ..|> Banking.Trade
 

